<?php
/**
 * @var \Magento\Framework\View\Element\Template $block
 * @var \Ashokdubariya\Testimonial\ViewModel\TestimonialList $viewModel
 * @var \Magento\Framework\Escaper $escaper
 */
$viewModel = $block->getData('view_model');
$testimonials = $viewModel->getTestimonials();
?>

<div class="testimonials-page">
    <div class="testimonials-actions">
        <a href="<?= $escaper->escapeUrl($viewModel->getSubmitUrl()) ?>" class="action primary">
            <span><?= $escaper->escapeHtml(__('Submit Your Testimonial')) ?></span>
        </a>
    </div>

    <?php if ($testimonials->getSize()): ?>
        <div class="testimonials-list">
            <?php foreach ($testimonials as $testimonial): ?>
                <div class="testimonial-item">
                    <div class="testimonial-header">
                        <div class="customer-info">
                            <span class="customer-name">
                                <?= $escaper->escapeHtml($testimonial->getCustomerName()) ?>
                            </span>
                            <div class="rating">
                                <?= $viewModel->getRatingStarsHtml((int)$testimonial->getRating()) ?>
                            </div>
                        </div>
                    </div>
                    <div class="testimonial-message">
                        <p><?= $escaper->escapeHtml($testimonial->getMessage()) ?></p>
                    </div>
                </div>
            <?php endforeach; ?>
        </div>
    <?php else: ?>
        <div class="message info empty">
            <div><?= $escaper->escapeHtml(__('No testimonials available yet. Be the first to share your experience!')) ?></div>
        </div>
    <?php endif; ?>
</div>
